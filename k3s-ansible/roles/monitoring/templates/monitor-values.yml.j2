grafana:
  adminPassword: "{{ grafana_admin_password }}"
  service:
    type: NodePort
    nodePort: {{ grafana_node_port }}
  grafana.ini:
    server:
      root_url: "http://{{ cluster_ip }}:{{ grafana_node_port }}"
  nodeSelector:
    kubernetes.io/hostname: "{{ target_node }}"
  
  # [추가] 데이터 보존을 위한 스토리지 설정
  persistence:
    enabled: true
    storageClassName: "local-path"
    size: 5Gi

  resources:
    requests:
      memory: 128Mi
      cpu: 100m
    limits:
      memory: 1Gi

prometheus:
  prometheusSpec:
    retention: 7d
    nodeSelector:
      kubernetes.io/hostname: "{{ target_node }}"
    
    # [추가] 데이터 보존을 위한 스토리지 설정
    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: "local-path"
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 10Gi

    resources:
      requests:
        memory: 512Mi
        cpu: 500m
      limits:
        memory: 2Gi

alertmanager:
  enabled: true
  # [추가] Alertmanager도 저장소가 있어야 정상 작동합니다
  alertmanagerSpec:
    storage:
      volumeClaimTemplate:
        spec:
          storageClassName: "local-path"
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 2Gi
